<!-- <form (submit)="submitForm()"> -->
    <!-- <div>
      <label for="name"></label>
      <input *ngIf="homeworkTest.isEdit" class="input" type="text" id="name" name="name" [(ngModel)]="homeworkTest.name">
      <span class="input" *ngIf="!homeworkTest.isEdit">{{ homeworkTest.name }}</span>
      <button class="editButton" *ngIf="!homeworkTest.isEdit" (click)="onEdit(homeworkTest)">Edytuj</button>
      <button class="saveButton" *ngIf="homeworkTest.isEdit"  type="submit">Zapisz zmiany</button>
    </div>
    <div>
      <label for="taskContent"></label>
      <textarea class="textarea" id="taskContent" name="taskContent" [(ngModel)]="homeworkTest.taskContent" [readonly]="!homeworkTest.isEdit"></textarea> -->
      <!-- <span class="input" *ngIf="!eduMaterial.isEdit">{{ eduMaterial.description }}</span> -->
    <!-- </div> -->
    <!-- <button *ngIf="eduMaterial.isEdit" type="submit">Zapisz zmiany</button> -->
<!-- </form> -->

<!-- <div class="panelfiles">   -->
  <!-- Formularz do dodawania plików -->
  <!-- <form (submit)="onAddFile(homeworkTest)" enctype="multipart/form-data">
    <label for="file">Wybierz plik:</label>
    <input type="file" name="file" id="file" accept=".pdf, .doc, .docx, .jpg, .png" (change)="onFileSelected($event)"> -->
    <!-- Akceptowane rozszerzenia plików -->
    <!-- <button type="submit">Prześlij plik</button>
  </form>

  <div *ngIf="htFiles && htFiles.length > 0">
    <h2>Pliki do zadania:</h2>
    <ul>
      <li *ngFor="let htFile of htFiles">
        <a (click)="downloadFileById(htFile.id)" href="javascript:void(0);" >{{ htFile.name }}</a>
        <i class="fa fa-trash-o" aria-hidden="true" (click)="onDeleteEMFile(htFile)"></i>
      </li>
    </ul>
  </div>
</div> -->

<!-- <div class="panelfiles">
    <h2>Materiał edukacyjny</h2>
    <form (submit)="submitForm()">
      <div class="form-group">
        <label for="name">Nazwa:</label>
        <input *ngIf="homeworkTest.isEdit" class="input" type="text" id="name" name="name" [(ngModel)]="homeworkTest.name">
        <span class="input" *ngIf="!homeworkTest.isEdit">{{ homeworkTest.name }}</span>
        <button class="editButton" *ngIf="!homeworkTest.isEdit" (click)="onEdit(homeworkTest)">Edytuj</button>
        <button class="saveButton" *ngIf="homeworkTest.isEdit" type="submit">Zapisz zmiany</button>
      </div>
      <div class="form-group">
        <label for="taskContent">Polecenie:</label>
        <textarea class="textarea" id="taskContent" name="taskContent" [(ngModel)]="homeworkTest.taskContent" [readonly]="!homeworkTest.isEdit"></textarea>
      </div>
    </form>
  
    <form (submit)="onAddFile(homeworkTest)" enctype="multipart/form-data">
      <div class="form-group">
        <label for="file">Wybierz plik:</label>
        <input type="file" name="file" id="file" accept=".pdf, .doc, .docx, .jpg, .png" (change)="onFileSelected($event)">
      </div>
      <button type="submit">Prześlij plik</button>
    </form>
  
    <div *ngIf="htFiles && htFiles.length > 0">
      <h2>Pliki do zadania:</h2>
      <ul>
        <li *ngFor="let htFile of htFiles">
          <a (click)="downloadFileById(htFile.id)" href="javascript:void(0);">{{ htFile.name }}</a>
          <i class="fa fa-trash-o" aria-hidden="true" (click)="onDeleteEMFile(htFile)"></i>
        </li>
      </ul>
    </div>
  </div> -->

  <div class="container">
    <div class="panelfiles">
      <h2>Zadanie</h2>
      <form (submit)="submitForm()">
        <div class="form-group">
          <label for="name">Nazwa:</label><br>
          <input *ngIf="homeworkTest.isEdit" class="input" type="text" id="name" name="name" [(ngModel)]="homeworkTest.name">
          <span class="input" *ngIf="!homeworkTest.isEdit">{{ homeworkTest.name }}</span>
          <button class="editButton" *ngIf="!homeworkTest.isEdit" (click)="onEdit(homeworkTest)">Edytuj</button>
          <button class="saveButton" *ngIf="homeworkTest.isEdit" type="submit">Zapisz zmiany</button>
        </div><br>
        <label for="taskContent">Polecenie:</label>
        <div class="form-group">
          <!-- <label for="taskContent">Polecenie:</label> -->
          <textarea class="textarea" id="taskContent" name="taskContent" [(ngModel)]="homeworkTest.taskContent" [readonly]="!homeworkTest.isEdit"></textarea>
        </div>

        
        <!-- <div style="background-color: lightblue; padding: 10px;">
          <h3>Termin oddania zadania:</h3>
          <span style="font-size: 18px;">{{ homeworkTest.deadline | date:'yyyy-MM-dd HH:mm:ss' }}</span>
        </div> -->

        <div style="background-color: lightblue; padding: 10px;">
          <h3>Termin oddania zadania:</h3>
          <ng-container *ngIf="!isEditingDate; else dateEditor">
            <span (click)="isEditingDate = true">
              {{ homeworkTest.deadline | date:'yyyy-MM-ddTHH:mm:ss' }}
            </span>
            <!-- Dodaj tutaj warunek sprawdzający obecność daty przed pokazaniem przycisku Edytuj -->
            <button *ngIf="homeworkTest && homeworkTest.deadline" (click)="isEditingDate = true">
              Edytuj
            </button>
          </ng-container><br><br>
          <p *ngIf="!calculateDaysUntilDeadline().overdue">
            Pozostało: {{ calculateDaysUntilDeadline().days }} dni, {{ calculateDaysUntilDeadline().hours }} godzin, {{ calculateDaysUntilDeadline().minutes }} minut
          </p>
          
          <div *ngIf="calculateDaysUntilDeadline().overdue">
            <p>
              Termin zadania upłynął {{ calculateDaysUntilDeadline().days }} dni, {{ calculateDaysUntilDeadline().hours }} godzin i {{ calculateDaysUntilDeadline().minutes }} minut temu.
            </p>
          </div>
          <ng-template #dateEditor>
            <input type="datetime-local" name="editedDeadline" [(ngModel)]="editedDeadline">
            <button (click)="saveEditedDeadline()">Zapisz</button>
            <button (click)="cancelEditDate()">Anuluj</button>
          </ng-template>
        </div>
        
        
        

       
        
    
        <!-- Formularz do dodawania plików -->
        <form (submit)="onAddFile(homeworkTest)" enctype="multipart/form-data">
          <div class="filesadd">
            <label for="file">Wybierz plik:</label>
            <input type="file" name="file" id="file" accept=".pdf, .doc, .docx, .jpg, .png" (change)="onFileSelected($event)">
            <!-- Akceptowane rozszerzenia plików -->
          <button type="submit">Prześlij plik</button>
          </div>
        </form>
    
        <div *ngIf="htFiles && htFiles.length > 0">
          <h2>Pliki do zadania:</h2>
          <ul>
            <li *ngFor="let htFile of htFiles">
              <a (click)="downloadFileById(htFile.id)" href="javascript:void(0);">{{ htFile.name }}</a>
              <i class="fa fa-trash-o" aria-hidden="true" (click)="onDeleteEMFile(htFile)"></i>
            </li>
          </ul>
        </div>
      </form>
      <div *ngIf="userRole === 'student' || userRole === 'admin'">
      <div *ngIf="answer">
        <h2>Odpowiedź na pracę domową</h2>
        <button (click)="onEditAnswer(answer)">Edytuj odpowiedź</button>
        <button (click)="onDeleteAnswer(answer)">Usuń odpowiedź</button>
        <!-- <p><strong>Zawartość odpowiedzi:</strong> {{ answer.answerContent }}</p> -->
        <div *ngIf="!isAnswerContentVisible" class="answer-content">
          {{ answer.answerContent }}
        </div>
        <p *ngIf="!isAnswerContentVisible"><strong>Status odpowiedzi:</strong> {{ answer.answerStatus }}</p>
        <p *ngIf="!isAnswerContentVisible"><strong>Utworzono:</strong> {{ answer.createdAt | date:'yyyy-MM-dd HH:mm:ss' }}</p>
        <p *ngIf="!isAnswerContentVisible"><strong>Ostatnia modyfikacja:</strong> {{ answer.updatedAt | date:'yyyy-MM-dd HH:mm:ss' }}</p>
        <!-- <p *ngIf="!isAnswerContentVisible"><strong>Dni do deadline'u:</strong> {{ calculateDaysUntilDeadline() }} dni</p> -->
        <!-- <p>
          Pozostało: {{ calculateDaysUntilDeadline().days }} dni, {{ calculateDaysUntilDeadline().hours }} godzin, {{ calculateDaysUntilDeadline().minutes }} minut
        </p> -->
       
        <div [ngClass]="{'green-background': calculateTimeDifference().beforeDeadline, 'red-background': !calculateTimeDifference().beforeDeadline}">
        <p>
          {{ calculateTimeDifference().beforeDeadline ? 'Zadanie zostało przesłane ' : 'Zadanie zostało przesłane ' }}
          {{ calculateTimeDifference().days }} dni, {{ calculateTimeDifference().hours }} godzin i {{ calculateTimeDifference().minutes }} minut
          {{ calculateTimeDifference().beforeDeadline ? 'przed terminem.' : 'po terminie.' }}
        </p>
        </div>

        
        
        
        
        
        
        
        
        
        <!-- <p *ngIf="!calculateDaysUntilDeadline().overdue">
          Pozostało: {{ calculateDaysUntilDeadline().days }} dni, {{ calculateDaysUntilDeadline().hours }} godzin, {{ calculateDaysUntilDeadline().minutes }} minut
        </p>
        
        <div *ngIf="calculateDaysUntilDeadline().overdue">
          <p>
            Termin zadania upłynął {{ calculateDaysUntilDeadline().days }} dni, {{ calculateDaysUntilDeadline().hours }} godzin i {{ calculateDaysUntilDeadline().minutes }} minut temu.
          </p>
        </div> -->
        
          
        
        <div *ngIf="isAnswerContentVisible">
            <!-- Dodaj pole do edycji treści odpowiedzi -->
            <textarea class="textarea" id="answerContent" name="answerContent" [(ngModel)]="answer.answerContent"></textarea><br>
            <p *ngIf="isAnswerContentVisible"><strong>Status odpowiedzi:</strong> {{ answer.answerStatus }}</p>
            <p *ngIf="isAnswerContentVisible"><strong>Utworzono:</strong> {{ answer.createdAt | date:'yyyy-MM-dd HH:mm:ss' }}</p>
            <p *ngIf="isAnswerContentVisible"><strong>Ostatnia modyfikacja:</strong> {{ answer.updatedAt | date:'yyyy-MM-dd HH:mm:ss' }}</p>
            <button (click)="onUpdateAnswer()">Zapisz zmiany</button>
            
        <!-- Formularz do dodawania plików -->
        <form (submit)="onAddAFile(answer)" enctype="multipart/form-data">
            <div class="filesadd">
              <label for="file">Wybierz plik:</label>
              <input type="file" name="file" id="file" accept=".pdf, .doc, .docx, .jpg, .png" (change)="onAFileSelected($event)">
              <!-- Akceptowane rozszerzenia plików -->
            <button type="submit">Prześlij plik</button>
            </div>
        </form>
            </div>

            <div *ngFor="let aFile of aFilesByAnswer" (click)="loadAFilesByAnswerId(answer.id)">
                <a (click)="downloadFileById(aFile.id)" href="javascript:void(0);">{{ aFile.name }}</a>
                <i class="fa fa-trash-o" aria-hidden="true" (click)="onDeleteAFile(aFile)"></i>
            </div>

      </div>
    
      <div *ngIf="!answer">
        <p>Brak dostępnej odpowiedzi.</p>
        <button (click)="onEditAnswer(answer)">Dodaj odpowiedź</button>
        <div *ngIf="isAnswerContentVisible">
            <!-- <label for="answerContent">Treść odpowiedzi:</label> -->
            <textarea class="textarea" id="answerContent" name="answerContent" [(ngModel)]="newAnswerContent"></textarea>
            <button (click)="onSaveAnswer()">Zapisz odpowiedź</button>
          </div>
      </div>
    </div>
      
      <!-- <div *ngFor="let classGroup of filteredClassGroups">
        <a  href="javascript:void(0);" (click)="loadClassGroupsByCoursesId(course.section.course.id)">{{ classGroup.name }}</a>
      </div> -->

    <div *ngIf="userRole === 'teacher'"> 
        <h2>Odpowiedzi:</h2>
        <mat-accordion>
            <mat-expansion-panel class="expansionPanel" *ngFor="let classGroup of filteredClassGroups; let srNo = index" (click)="getClassGroupId(classGroup.id)">
            <mat-expansion-panel-header class="header">
                <mat-panel-title class="matPanelTitle">{{ classGroup.name }}</mat-panel-title>
            </mat-expansion-panel-header>
            <!-- <div *ngIf="answersByHomeworkTestAndClassGroup">
                <div *ngFor="let answer of answersByHomeworkTestAndClassGroup">
                    <a (click)="openAnswerDetailsDialog(answer)">{{ answer.user.firstName}} {{answer.user.lastName}} </a>
                    <span *ngIf="answer.answerStatus">{{ answer.answerStatus }}</span> -->
                    <!-- <a (click)="openAnswerDetailsDialog(answer)"> {{ answer.answerContent }} </a> -->
                <!-- </div> 
            </div> -->

            <div *ngIf="answersByHomeworkTestAndClassGroup">
              <ng-container *ngFor="let answer of answersByHomeworkTestAndClassGroup">
                <ng-container *ngIf="answer.answerStatus === 'NIEOCENIONE'">
                  <div class="colored-text blue-text">
                    <a (click)="openAnswerDetailsDialog(answer)">{{ answer.user.firstName }} {{ answer.user.lastName }} {{ ' ' }}</a>
                    <span class="blue-text">{{ answer.answerStatus }}</span>
                    <!-- Tutaj możesz dodać dowolne informacje dotyczące odpowiedzi -->
                  </div>
                </ng-container>
              </ng-container>
              
              <ng-container *ngFor="let answer of answersByHomeworkTestAndClassGroup">
                <ng-container *ngIf="answer.answerStatus === 'ZALICZONE'">
                  <div class="colored-text green-text">
                    <a (click)="openAnswerDetailsDialog(answer)">{{ answer.user.firstName }} {{ answer.user.lastName }} {{ ' ' }}</a>
                    <span class="green-text">{{ answer.answerStatus }}</span>
                    <!-- Tutaj możesz dodać dowolne informacje dotyczące odpowiedzi -->
                  </div>
                </ng-container>
              </ng-container>
              
              <ng-container *ngFor="let answer of answersByHomeworkTestAndClassGroup">
                <ng-container *ngIf="answer.answerStatus === 'NIEZALICZONE'">
                  <div class="colored-text red-text">
                    <a (click)="openAnswerDetailsDialog(answer)">{{ answer.user.firstName }} {{ answer.user.lastName }} {{ ' ' }}</a>
                    <span class="red-text">{{ answer.answerStatus }}</span>
                    <!-- Tutaj możesz dodać dowolne informacje dotyczące odpowiedzi -->
                  </div>
                </ng-container>
              </ng-container>
            </div>
            
            
            
            
            
            
            

            </mat-expansion-panel>
        </mat-accordion>
    </div>
      

    </div>
  </div>
    
  <footer class="footer">
      <p>&copy; 2023 EduSolution. Wszelkie prawa zastrzeżone.</p>
      <p>Kontakt: kontakt@example.com</p>
  </footer>
  